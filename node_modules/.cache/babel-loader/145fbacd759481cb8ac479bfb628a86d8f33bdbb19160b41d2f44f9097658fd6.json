{"ast":null,"code":"var _jsxFileName = \"D:\\\\projeto-ts\\\\src\\\\pages\\\\Pacientes\\\\pacienteInfo.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PacienteInfo = ({\n  token\n}) => {\n  _s();\n  const [paciente, setPaciente] = useState({\n    nome: \"\",\n    sobrenome: \"\",\n    dataNascimento: \"\",\n    cpf: \"\",\n    email: \"\",\n    telefone: 0\n  });\n  const [editMode, setEditMode] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [senha, setSenha] = useState(\"\");\n  const [confirmarSenha, setConfirmarSenha] = useState(\"\");\n  const [refreshToken, setRefreshToken] = useState(\"\");\n  const [accessToken, setAcessToken] = useState(token);\n  const [telefone, setTelefone] = useState(0);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(\"http://localhost:3000/paciente\", {\n          headers: {\n            Authorization: accessToken\n          }\n        });\n        setPaciente(response.data.paciente);\n        setRefreshToken(response.data.refreshToken);\n      } catch (error) {\n        console.error(\"Erro ao obter informações do paciente:\", error);\n      }\n    };\n    fetchData();\n  }, [accessToken]);\n  const obterNovoToken = async refreshToken => {\n    try {\n      // Chame a nova rota de renovação de token\n      const response = await axios.post(\"/paciente/refresh-token\", {\n        refreshToken\n      });\n\n      // Retorne o novo token extraído da resposta\n      return response.data.newToken;\n    } catch (error) {\n      console.error(\"Erro ao obter novo token:\", error);\n      throw error; // Propague o erro para que possa ser tratado externamente\n    }\n  };\n\n  const handleEditClick = () => {\n    setEditMode(true);\n    setEmail(paciente.email || \"\");\n    setTelefone(paciente.telefone || 0);\n    setSenha(\"\");\n    setConfirmarSenha(\"\");\n  };\n  const handleSaveClick = async () => {\n    try {\n      // Validar a confirmação de senha\n      if (senha !== confirmarSenha) {\n        console.error(\"A senha e a confirmação de senha não coincidem\");\n        return;\n      }\n      await axios.put(\"http://localhost:3000/paciente\", {\n        email,\n        senha\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      const newToken = await obterNovoToken(refreshToken);\n      setAcessToken(newToken);\n      setEditMode(false);\n    } catch (error) {\n      console.error(\"Erro ao atualizar informações do paciente:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Informa\\xE7\\xF5es do Paciente\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Nome:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), \" \", paciente.nome || \"\", \" \", paciente.sobrenome || \"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Data de Nascimento:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), \" \", paciente.dataNascimento || \"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"CPF:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), \" \", paciente.cpf || \"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), editMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Email:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: email,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Nova Senha:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        value: senha,\n        onChange: e => setSenha(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Confirmar Senha:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        value: confirmarSenha,\n        onChange: e => setConfirmarSenha(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSaveClick,\n        children: \"Salvar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Email:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this), \" \", paciente.email || \"\", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleEditClick,\n        children: \"Editar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n_s(PacienteInfo, \"sipQCHQftE4C54TfoRu1NxMBIwo=\");\n_c = PacienteInfo;\nexport default PacienteInfo;\nvar _c;\n$RefreshReg$(_c, \"PacienteInfo\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","PacienteInfo","token","_s","paciente","setPaciente","nome","sobrenome","dataNascimento","cpf","email","telefone","editMode","setEditMode","setEmail","senha","setSenha","confirmarSenha","setConfirmarSenha","refreshToken","setRefreshToken","accessToken","setAcessToken","setTelefone","fetchData","response","get","headers","Authorization","data","error","console","obterNovoToken","post","newToken","handleEditClick","handleSaveClick","put","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["D:/projeto-ts/src/pages/Pacientes/pacienteInfo.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\ninterface Paciente {\n  nome: string;\n  sobrenome: string;\n  dataNascimento: string;\n  cpf: string;\n  email: string;\n  telefone: number;\n}\n\nconst PacienteInfo: React.FC<{ token: string }> = ({ token }) => {\n  const [paciente, setPaciente] = useState<Paciente>({\n    nome: \"\",\n    sobrenome: \"\",\n    dataNascimento: \"\",\n    cpf: \"\",\n    email: \"\",\n    telefone: 0,\n  });\n  const [editMode, setEditMode] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [senha, setSenha] = useState(\"\");\n  const [confirmarSenha, setConfirmarSenha] = useState(\"\");\n  const [refreshToken, setRefreshToken] = useState(\"\");\n  const [accessToken, setAcessToken] = useState(token);\n  const [telefone, setTelefone] = useState<number>(0);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(\"http://localhost:3000/paciente\", {\n          headers: {\n            Authorization: accessToken,\n          },\n        });\n        setPaciente(response.data.paciente);\n        setRefreshToken(response.data.refreshToken)\n      } catch (error) {\n        console.error(\"Erro ao obter informações do paciente:\", error);\n      }\n    };\n\n    fetchData();\n  }, [accessToken]);\n\n  const obterNovoToken = async (refreshToken: string) => {\n    try {\n      // Chame a nova rota de renovação de token\n      const response = await axios.post(\"/paciente/refresh-token\", { refreshToken });\n\n      // Retorne o novo token extraído da resposta\n      return response.data.newToken;\n    } catch (error) {\n      console.error(\"Erro ao obter novo token:\", error);\n      throw error; // Propague o erro para que possa ser tratado externamente\n    }\n  };\n\n  const handleEditClick = () => {\n    setEditMode(true);\n    setEmail(paciente.email || \"\");\n    setTelefone(paciente.telefone || 0);\n    setSenha(\"\");\n    setConfirmarSenha(\"\");\n  };\n\n  const handleSaveClick = async () => {\n    try {\n      // Validar a confirmação de senha\n      if (senha !== confirmarSenha) {\n        console.error(\"A senha e a confirmação de senha não coincidem\");\n        return;\n      }\n\n      await axios.put(\n        \"http://localhost:3000/paciente\",\n        { email, senha },\n        {\n          headers: {\n            Authorization: token,\n          },\n        }\n      );\n\n      const newToken = await obterNovoToken(refreshToken);\n      setAcessToken(newToken);\n\n      setEditMode(false);\n    } catch (error) {\n      console.error(\"Erro ao atualizar informações do paciente:\", error);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Informações do Paciente</h2>\n      <div>\n        <strong>Nome:</strong> {paciente.nome || \"\"} {paciente.sobrenome || \"\"}\n      </div>\n      <div>\n        <strong>Data de Nascimento:</strong> {paciente.dataNascimento || \"\"}\n      </div>\n      <div>\n        <strong>CPF:</strong> {paciente.cpf || \"\"}\n      </div>\n      {editMode ? (\n        <div>\n          <label>Email:</label>\n          <input\n            type=\"text\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n          <label>Nova Senha:</label>\n          <input\n            type=\"password\"\n            value={senha}\n            onChange={(e) => setSenha(e.target.value)}\n          />\n          <label>Confirmar Senha:</label>\n          <input\n            type=\"password\"\n            value={confirmarSenha}\n            onChange={(e) => setConfirmarSenha(e.target.value)}\n          />\n          <button onClick={handleSaveClick}>Salvar</button>\n        </div>\n      ) : (\n        <div>\n          <strong>Email:</strong> {paciente.email || \"\"}\n          <button onClick={handleEditClick}>Editar</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PacienteInfo;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}